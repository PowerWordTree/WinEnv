::@author FB
::@version 0.1.0

::因为REG命令混乱的转义符代码, 造成很多奇怪的BUG
::额外的IF脚本为了避免`\"`被错误转义

::因为CMD环境变量扩展在变量未定义时, 会继续寻找后续%组成变量,
::所以脚本中IF和SET不能写在一行, 以避免造成未知结果

::注册表删除
::  参数1: 注册表路径
::  参数2: 注册表键(空时删除路径)

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::

SETLOCAL
SET "@PATH=%~1" & SET "@KEY=%~2"
IF "%@PATH:~-1%" == "\" (
  SET "@PATH=%@PATH%\"
)
IF "%@KEY:~-1%" == "\" (
  SET "@KEY=%@KEY%\"
)
IF "%~2" == "" (
  REG.EXE DELETE "%@PATH%" /F 1>NUL 2>&1
) ELSE (
  REG.EXE DELETE "%@PATH%" /V "%@KEY%" /F 1>NUL 2>&1
)
ENDLOCAL & EXIT /B %ERRORLEVEL%
